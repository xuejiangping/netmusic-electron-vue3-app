"use strict";const e=require("electron"),o=require("path");process.env.ELECTRON_DISABLE_SECURITY_WARNINGS="true";const t=()=>{e.Menu.setApplicationMenu(null);const n=new e.BrowserWindow({width:800,height:560,minWidth:650,minHeight:450,frame:!1,title:"网易云音乐",autoHideMenuBar:!0,webPreferences:{contextIsolation:!1,nodeIntegration:!0,preload:o.join(__dirname,"../electron-preload/index.js")}});if(e.app.isPackaged)n.loadFile(o.join(o.join(__dirname,"../index.html")));else{const i="http://localhost:5173/";n.loadURL(process.env.VITE_DEV_SERVER_URL||i)}return n};e.app.whenReady().then(()=>{const n=t();e.globalShortcut.register("CommandOrControl+Shift+i",function(){n.webContents.openDevTools()}),e.app.on("activate",()=>{e.BrowserWindow.getAllWindows().length===0&&t()}),process.env.VITE_DEV_SERVER_URL?n.loadURL(process.env.VITE_DEV_SERVER_URL):n.loadFile("dist/index.html")});e.app.on("window-all-closed",()=>{process.platform!=="darwin"&&e.app.quit()});
